apiVersion: csdp.codefresh.io/v1
kind: PromotionFlow
metadata:
  name: base-flow
spec:
  triggerEnvironment: qa
  postTrigger: 'post-action'
  steps:
  - environment: staging
    dependsOn:
    - qa
    policy:
      # preAction and postAction are *not* required
      preAction: 'pre-action'
      postAction: 'post-action-123'
      # action is a required field
      action: commit # commit|pr|none

  - environment: production
    dependsOn:
    - staging
    policy:
      preAction: 'pre-action'
      postAction: 'post-action-456'
      action: commit # commit|pr|none
