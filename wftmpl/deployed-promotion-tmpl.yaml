apiVersion: argoproj.io/v1alpha1
kind: WorkflowTemplate
metadata:
  name: deployed-promotion-tmpl
  labels:
    codefresh.io/promotion: 'true'
spec:
  arguments:
    parameters:
    - name: POST_SYNC_WORKFLOW
    - name: ARGS
  entrypoint: post-sync
  templates:
  - name: post-sync
    when: "{{ workflow.parameters.POST_SYNC_WORKFLOW }} != ''"
    arguments:
      parameters:
      - name: TEMPLATE_NAME
        value: {{ workflow.parameters.POST_SYNC_WORKFLOW }}
      - name: ARGS
        value: {{ workflow.parameters.ARGS }}
    templateRef:
      name: submit-workflow
      template: submit
